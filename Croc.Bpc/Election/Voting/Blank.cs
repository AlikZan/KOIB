using System; 

using System.Xml.Serialization; 

using System.Text; 

using System.Collections.Generic; 

 

 

namespace Croc.Bpc.Election.Voting 

{ 

	/// <summary> 

	/// ????? ??????????? 

	/// </summary> 

	[Serializable, XmlType("Blank")] 

	public class Blank 

	{ 

		/// <summary> 

		/// ???????? - ????????? ?????? ????????? 

		/// </summary> 

		[XmlElement("model")] 

		public string Model; 

		/// <summary> 

		/// ?????? ???????? ???????, ??????????? ?? ?????? 

		/// </summary> 

        [XmlArray("Sections")] 

        [XmlArrayItem("int", IsNullable = false)] 

        public string[] Sections = new string[0]; 

		/// <summary> 

		/// ?????, ?????????? ???????????????? ????? 

		/// </summary> 

        [XmlAttribute("marker")] 

        public int Marker; 

		/// <summary> 

		/// ????????????? ????????? ?????? ?????????? ??????? ???? 

		/// </summary> 

        [XmlAttribute("density")] 

        public int Density; 

        /// <summary> 

		///		???????? ?????? 

		/// </summary> 

		[XmlAttribute("name")] 

		public string Name; 

		/// <summary> 

		///		?????? ?????? ??? ?????????? ?????????? 

		/// </summary> 

		[XmlAttribute("width")] 

		public int Width; 

		/// <summary> 

		///		?????? ?????? ??? ?????????? ?????????? 

		/// </summary> 

		[XmlAttribute("height")] 

		public int Height; 


        /// <summary> 

		///		?????????? ?????? ??? ??????? ??????????? ? ???????????? ????? ?????? 

		/// </summary> 

		[XmlAttribute("delta")] 

		public int Delta; 

		/// <summary> 

		///		?????????? ?????????? ?????? 

		/// </summary> 

        [XmlAttribute("orientation")] 

        public BlankOrientation Orientation; 

		/// <summary> 

		///		??????????? ?????????? ???????? ???????????? ?????? ???? ??? ?????????? ?????????? 

		/// </summary> 

        [XmlAttribute("maxPShift")] 

        public int MaxPortraitShift; 

        /// <summary> 

		///		??????????? ?????????? ???????? ???????????? ?????? ???? ??? ????????? ?????????? 

		/// </summary> 

		[XmlAttribute("maxLShift")] 

		public int MaxLandscapeShift; 

		/// <summary> 

		///	????????????? ?????? ?? ??????? ??????? 

		/// </summary> 

		[XmlAttribute("num")] 

		public string ExternalId; 

        /// <summary> 

        /// ????????????? ?????? 

        /// </summary> 

        [XmlIgnore] 

        public string Id 

        { 

            get 

            { 

                return Marker.ToString(); 

            } 

        } 

        /// <summary> 

        /// ???????? ??????, ? ??????? ????????? ?????? ????? 

        /// </summary> 

        [XmlIgnore] 

        internal SourceData SourceData 

        { 

            get; 

            set; 

        } 

 

 

        /// <summary> 

        /// ???????????? ???????, ??????? ?? ???? ?????? 

        /// </summary> 


        [XmlIgnore] 

        public string[] Elections 

        { 

            get 

            { 

                var electionNames = new List<string>(Sections.Length); 

                foreach (var sect in Sections) 

                    electionNames.Add(SourceData.GetElectionByNum(sect).Name); 

 

 

                return electionNames.ToArray(); 

            } 

        } 

 

 

		/// <summary> 

		/// ????????? ????????? ????????????? ??????? 

		/// </summary> 

		/// <returns></returns> 

		public override string ToString() 

		{ 

			// ??????, ???????? ????????? ????????????? ??????? 

			StringBuilder sLine = new StringBuilder(); 

 

 

			// ????????? ??????????? ??????  

			sLine.Append("["); 

			//????????? ????????? ?????? ????????? 

			sLine.Append("Model=" + Model + ";"); 

			// ????????? ?????? ???????? ???????, ??????????? ?? ?????? 

			sLine.Append("Sections=["); 

			foreach(string section in Sections) 

			{ 

				sLine.Append(section + ";"); 

			} 

			sLine.Append("],"); 

			// ????????? ?????? ?????? 

			sLine.Append("Marker=" + Marker.ToString() + ";"); 

			// ????????? ????????????? ????????? ?????? ?????????? ??????? ???? 

			sLine.Append("Density=" + Density.ToString() + ";"); 

			// ????????? ???????? ?????? 

			sLine.Append("Name=" + Name + ";"); 

			// ????????? ?????? ?????? ??? ?????????? ?????????? 

			sLine.Append("Width=" + Width.ToString() + ";"); 

			// ????????? ?????? ?????? ??? ?????????? ?????????? 

			sLine.Append("Height=" + Height.ToString() + ";"); 

			// ????????? ?????????? ?????? ??? ??????? ??????????? ? ???????????? ????? ?????? 

			sLine.Append("Delta=" + Delta.ToString() + ";"); 

			// ????????? ?????????? ?????????? ?????? 

			sLine.Append("Orientation=" + Orientation.ToString() + ";"); 


			// ????????? ??????????? ?????????? ???????? ???????????? ?????? ???? ??? ?????????? ?????????? 

			sLine.Append("MaxPShift=" + MaxPortraitShift.ToString() + ";"); 

			// ????????? ??????????? ?????????? ???????? ???????????? ?????? ???? ??? ????????? ?????????? 

			sLine.Append("MaxLShift=" + MaxLandscapeShift.ToString() + ";"); 

			// ????????? ????????????? ?????? ?? ??????? ??????? 

			sLine.Append("ID=" + Id); 

			// ????????? ??????????? ??????  

			sLine.Append("]"); 

 

 

			return sLine.ToString(); 

		} 

	} 

}


